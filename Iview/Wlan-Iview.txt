Wlan:
=====
- Scanning procedure in depth in ATH9k
- what is slave dfs and master dfs
- How radar will detected in wlan devices
- Significance of regulatory domain in Wlan
- Difference in IEEE80211 standards a, b, g, n, ac, ax, ah
- 4 way handshake
- What is short gaurd interval
- CSMA/CA and CSMA/CD
- What is dcf, pcf concept
- What is difs, sifs and aifs
- How QoS packets are queu and transmitted
- What is BlockAck
- Difference between AMSDU and AMPDU
 

Answers:
========
Scanning procedure in Wlan:
===========================
Several parameters are used in the scanning procedure. These parameters may be
specified by the user; many implementations have default values for these
parameters in the driver.

- BSSType
- BSSID
- SSID
- ScanType
- ChannelList
- ProbeDelay
- MinChannelTime and MaxChannelTime


BSSType (independent, infrastructure, or both)
----------------------------------------------
Scanning can specify whether to seek out independent ad hoc networks,
infrastructure networks, or all networks.

BSSID (individual or broadcast)
-------------------------------
The device can scan for a specific network to join (individual) or for any
network that is willing to allow it to join (broadcast). When 802.11 devices
are moving, setting the BSSID to broadcast is a good idea because the scan
results will include all BSSs in the area.

SSID ("network name")
---------------------
The SSID assigns a string of bits to an extended service set. Most products
refer to the SSID as the network name because the string of bits is commonly
set to a human-readable string. Clients wishing to find any network should
set this to the broadcast SSID.

ScanType (active or passive)
----------------------------
Active scanning uses the transmission of Probe Request frames to identify
networks in the area. Passive scanning saves battery power by listening for
Beacon frames.

ChannelList
-----------
Scans must either transmit a Probe Request or listen on a channel for the
existence of a network. 802.11 allows stations to specify a list of channels
to try. Products allow configuration of the channel list in different ways.
What exactly constitutes a channel depends on the physical layer in use.
With direct-sequence products, it is a list of channels. 
With frequency-hopping products, it is a hop pattern.

ProbeDelay
----------
This is the delay, in microseconds, before the procedure to probe a channel
in active scanning begins. This delay ensures that an empty or lightly loaded
channel does not completely block the scan.

MinChannelTime and MaxChannelTime
---------------------------------
These values, specified in time units (TUs), specify the minimum and 
maximum amount of time that the scan works with any particular channel.

There are two types of scanning: Passive scan and Active scan

Passive Scan:
-------------
Passive scanning saves battery power because it does not require transmitting.
In passive scanning, a station moves to each channel on the channel list 
and waits for Beacon frames. Any Beacons received are buffered to extract
information about the BSS that sent them.
In the passive scanning procedure, the station sweeps from channel to channel
and records information from any Beacons it receives. Beacons are designed to
allow a station to find out everything it needs to match parameters with the
basic service set (BSS) and begin communications.

Active Scan:
------------
In active scanning, a station takes a more assertive role. On each channel,
Probe Request frames are used to solicit responses from a network with a
given name. Rather than listening for that network to announce itself, 
an active scan attempts to find the network. Stations using active scanning
employ the following procedure for each channel in the channel list:
- Move to the channel and wait for either an indication of an incoming frame
  or for the ProbeDelay timer to expire. If an incoming frame is detected,
  the channel is in use and can be probed. The timer prevents an empty channel
  from blocking the entire procedure; the station won't wait indefinitely for
  incoming frames.
- Gain access to the medium using the basic DCF access procedure and send 
  a Probe Request frame.
- Wait for the minimum channel time, MinChannelTime, to elapse.
  - If the medium was never busy, there is no network. Move to the next
    channel.
  - If the medium was busy during the MinChannelTime interval, wait until
    the maximum time, MaxChannelTime, and process any Probe Response frames.
Probe Response frames are generated by networks when they hear a Probe Request
that is searching for the extended service set to which the network belongs.
Probe Request frames can also use a broadcast SSID, which triggers a 
Probe Response from all 802.11 networks in the area.
One station in each BSS is responsible for responding to Probe Requests.
The station that transmitted the last Beacon frame is also responsible for
transmitting any necessary Probe Response frames. In infrastructure networks,
the access points transmit Beacons and thus are also responsible for
responding to itinerant stations searching the area with Probe Requests.
IBSSs may pass around the responsibility of sending Beacon frames, so the
station that transmits Probe Response frames may vary. Probe Responses are
unicast management frames and are therefore subject to the positive
acknowledgment requirement of the MAC.
It is common for multiple Probe Responses to be transmitted as a result of 
a single Probe Request. The purpose of the scanning procedure is to find
every basic service area that the scanning station can join, so a broadcast
Probe Request results in a response from every access point within range. 
Any overlapping independent BSSs may also respond.

The relationship between the transmission of Probe frames and the various
timing intervals that can be configured as part of a scan.
- The scanning station transmits the Probe Request after gaining access to
  the medium. Both access points respond with a Probe Response that reports
  their network's parameters. Note that the second Probe Response is subject
  to the rules of the distributed coordination function and must wait for 
  the contention window to elapse before transmitting.
- The first response is transmitted before the minimum response time elapses,
  so the station waits until the maximum response time has elapsed before
  collating the results. In areas with a large number of networks, it may 
  be necessary to adjust the maximum channel time so the responses from all 
  the access points in the area can be processed.
  
Scan Report:
------------
A scan report is generated at the conclusion of a scan. The report lists all
the BSSs that the scan discovered and their parameters. The complete parameter
list enables the scanning station to join any of the networks that it
discovered. In addition to the BSSID, SSID, and BSSType, the
parameters also include:[*]
[*] The items actually exposed by any particular software vary.

Beacon interval (integer): Each BSS can transmit Beacon frames at its own
                           specific interval, measured in TUs.

DTIM period (integer): DTIM frames are used as part of the powersaving
                       mechanism.

Timing parameters: Two fields assist in synchronizing the station's timer to
                   the timer used by a BSS. The Timestamp field indicates the
                   value of the timer received by the scanning station; the
                   other field is an offset to enable a station to match timing
                   information to join a particular BSS.

PHY parameters, CF parameters, and IBSS parameters: These three facets of the
network have their own parameter sets. Channel information is included in the
physical-layer parameters.

BSSBasicRateSet: The basic rate set is the list of data rates that must be
                 supported by any station wishing to join the network.
                 Stations must be able to receive data at all the rates listed
                 in the set. The basic rate set is composed of the mandatory
                 rates in the Supported Rates information element of management
                 frames.

FAQ's [Scanning procedure]:
---------------------------
1.   Difference between Direct prob and Null/Broadcast prob request ?
Ans: Direct prob request: A client station that is looking for a specific 
                          SSID sends a probe request with the SSID field set
                          to the specific SSID. If a directed probe request
                          is sent, all APs that support that specific SSID
                          and hear the request should reply by sending a
                          probe response.
     Null/Broadcast prob request: A client station that is looking for any 
                          SSID sends a probe request with the SSID field set
                          to null. If a null probe request is sent, all APs
                          that hear the request should reply by sending a
                          probe response.
                   
2.   Difference between Beacon frame and Probe response frame ?
Ans: The information that is contained inside the body of a probe response
     frame is the same information that can be found in a beacon frame, with
     the exception of the traffic indication map (TIM).

3.   Why we need two types of scanning (Active/Passive) ?
Ans: Passive scan can not find the networks which is configured and enabled
     as hidden ssid but it can detect the DFS channel.
     Active scanning can find the hidden network by 
     direct probe request/response.

